function hasGotMessage(e,i,n){switch(e.type){case"clickResponse":listenToMouseover(e.buttonClicked);break;case"ratingResponse":loadCallout(e)}}function showToast(e){var i="IMDb Extension Enabled...";e||(i="IMDb Extension Disabled...");var n=document.createElement("div");n.classList.add("__imdbToaster"),n.id="__imdbToaster",n.innerText=i,document.body.appendChild(n),setTimeout(function(){var e=document.getElementById("__imdbToaster");document.body.removeChild(e)},2e3)}function listenToMouseover(e){if(!e)return showToast(e),window.sessionStorage.removeItem("_imdbRaterEnabled"),document.body.removeEventListener("mouseover",handleMouseOver),void removeCallouts();showToast(e),loadCssToHead(),window.sessionStorage.setItem("_imdbRaterEnabled","1"),window._imdb_minWaitfBeforeExecute=void 0,document.body.addEventListener("mouseover",handleMouseOver)}function handleMouseOver(e){var i,n;i=(e=e||window.event).clientX,n=e.clientY;var t=void 0!==window._imdb_calloutElt?window._imdb_calloutElt.getBoundingClientRect():{};void 0!==window._imdb_calloutElt&&i<=t.width+t.left&&i>=t.left&&n<=t.top+t.height&&n>=t.top||(clearTimeout(_imdb_minWaitfBeforeExecute),_imdb_minWaitfBeforeExecute=setTimeout(findIMDB.bind(this,i,n),250))}function findIMDB(e,i){var n=document.elementFromPoint(e,i),t="";if((t=window.location.href.includes("netflix.com/browse")&&"bob-play-hitzone"===n.classList.value?n.parentElement.children[2].getElementsByClassName("bob-title")[0].innerText.trim():n&&n.innerText?n.innerText.trim():"")&&window._imdb_finderText!==t&&t.length<35){if((window._imdb_finderText=t).includes("HD"))return;chrome.runtime.sendMessage({type:"callAPI",text:t}),window._imdb_posx=e,window._imdb_posy=i,console.log("Message Sent: ",t)}}function findRefinedXandYcoordinates(){_imdb_posx+250>window.innerWidth&&(_imdb_posx=window.innerWidth-300),_imdb_posy+250>window.innerHeight&&(_imdb_posy=window.innerHeight-300)}function loadCallout(e){window._imdb_calloutShown&&removeCallouts();var i=getInnerComponentHTML(e),n=document.createElement("div");n.style.position="relative",n.className="_imdbClass",n.innerHTML=i.absElt+i.title+i.plot+i.genre+i.awards+i.line1+i.rottenTomatoes+i.metacritic+i.readMore+"</div>";var t=n.children[0];findRefinedXandYcoordinates(),t.style="position: fixed;top: "+_imdb_posy+"px; height: 250px; left: "+_imdb_posx+"px;display: flex;flex-direction: column;justify-content: space-around;",document.body.append(n),window._imdb_calloutShown=!0,window._imdb_calloutElt=t,window.onscroll=removeCallouts}function removeCallouts(){for(var e=document.getElementsByClassName("_imdbClass");e&&0<e.length;)e[0].parentNode.removeChild(e[0]);window._imdb_calloutShown=!1,window.onscroll=null}function loadCssToHead(){var e=chrome.extension.getURL("styles.css"),i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=e,document.head.appendChild(i)}function getInnerComponentHTML(e){var i='<div class="__imdb_titleClass">'+e.Title+"</div>",n='<div class="__imdb_plot">'+e.Plot+"</div>",t='<div class="__imdb_genre">'+e.Genre+"</div>",o=e.Awards?'<div>                  <span class="__imdb_fb">Awards: </span>                  <span class="__imdb_rate __imdb_fb">'+e.Awards+"</span>                </div>":"";return{absElt:'<div class=" __imdb_wrapper">',title:i,plot:n,genre:t,line1:'<div class="__imdb_line1">                <div class="__imdb_mw70">                  <span class="__imdb_fb">IMDb: </span>                  <span class="__imdb_rate __imdb_fb">'+e.imdbRating+'</span>                </div>                <div class="__imdb_mw50">                  <span class="__imdb_rate __imdb_fb">'+e.Runtime+'</span>                </div>                <div class="__imdb_mw50">                  <span class="__imdb_rate __imdb_fb">('+e.Year+")</span>                </div>              </div>",rottenTomatoes:'<div>                          <span class="__imdb_fb">Rotten Tomatoes: </span>                          <span class="__imdb_rate __imdb_fb">'+(e.Ratings[1]?e.Ratings[1].Value:"N/A")+"</span>                        </div>",metacritic:'<div>                      <span class="__imdb_fb">Metacritic: </span>                      <span class="__imdb_rate __imdb_fb">'+(e.Ratings[2]?e.Ratings[2].Value:"N/A")+"</span>                    </div>",readMore:'<div><span onclick="removeCallouts()" class="cancel">Cancel </span><a target="_blank" href="https://www.imdb.com/title/'+e.imdbID+'" style=""/><span class="__imdb_readMore">read more...</span></a></div>',awards:o}}console.log("started"),chrome.runtime.onMessage.addListener(hasGotMessage),document.body.addEventListener("click",function(){window._imdb_calloutShown&&removeCallouts()}),"1"===window.sessionStorage.getItem("_imdbRaterEnabled")&&listenToMouseover();